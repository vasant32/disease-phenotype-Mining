This paper describes an automatic classification system based on combination of diverse features for the purpose of automatic heartbeat recognition. The method consists of three stages. At the first stage, heartbeats are classified into 5 main groups defined by AAMI using optimal feature sets for each main group. At the second stage, main groups are classified into subgroups using optimal features for each subgroup. Then the third stage is added to the system for classifying beats that are labeled as unclassified beats in the first two classification stages. A diverse set of features including higher order statistics, morphological features, Fourier transform coefficients, and higher order statistics of the wavelet package coefficients are extracted for each different type of ECG beat. At the first stage, optimal features for main groups are determined by using a wrapper type feature selection algorithm. At the second stage, optimal features are similarly selected for discriminating each subgroup of the main groups. Then at the third stage, only raw data is used for classifying beats. In all stages, the classifiers are based on the k-nearest neighbor algorithm. ECG records used in this study are obtained from the MIT-BIH arrhythmia database. The classification accuracy of the proposed system is measured by sensitivity, selectivity, and specificity measures. The system is classified 16 heartbeat types. The measures of proposed system are 85.59%, 95.46%, and 99.56%, for average sensitivity, average selectivity, and average specificity, respectively.